#!/bin/sh

cp .tmux.conf ~
cp .inputrc ~
cp .zshrc ~
cp -r .config ~

# neovim
curl -LO https://github.com/neovim/neovim/releases/download/v0.9.5/nvim.appimage
chmod 777 nvim.appimage
./nvim.appimage --appimage-extract
mkdir -p ~/.local/bin
ln -s `pwd`/squashfs-root/AppRun ~/.local/bin/nvim
# coc.nvim requires node
curl --silent --location https://nodejs.org/download/release/v18.19.1/node-v18.19.1-linux-x64.tar.xz \
  | tar --extract --xz --strip-components 1 --directory ~/.local --file -

# other packages
sudo apt-get update
sudo apt-get install -y ranger python3-pip zplug
pip install --user pynvim

# shell setup
sudo chown -R $(id -un) /usr/local/share/zsh # defaults to owned by UNKOWN:ssh which causes annoying compaudit messages
sudo chsh "$(id -un)" --shell "/usr/bin/zsh"

# TODO: how to install plugins in this script?
# works interactively, but not in script?
#   zsh -c ". ~/.zshrc; zplug install"
# untested. might work, but would leave an nvim instance running
#   nvim --headless
